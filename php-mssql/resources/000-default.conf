<VirtualHost *:8080>
    ServerName ${SERVER_NAME}

    ServerAdmin dist-team-applikasjonsplattform@spk.no
    DocumentRoot /var/www/html

    # Available loglevels: trace8, ..., trace1, debug, info, notice, warn, error, crit, alert, emerg.
    # It is also possible to configure the loglevel for particular modules, e.g.
    #LogLevel info ssl:warn
    LogLevel info

    # Tilpasset SPK-standard for loggnavn
    ErrorLogFormat "{ \"level\":\"%l\", \"message\":\"Module:%-m, Source:%F, Referrer:%-{Referer}i, Message:%-M\" }"
    LogFormat "{ \"level\":\"info\", \"message\": \"%h %l %u %t %r %>s %b\", \"request\": { \"header\": { \"remote_ip\": \"%a\", \"content_type\": \"%{Content-Type}i\", \"user_agent\":\"%{User-agent}i\" }, \"method\":\"%m\", \"path_info\": \"%{}U\", \"query_str\":\"%q\", \"url\":\"%{Host}i%U%q\", \"user_id\": \"%{}u\" }, \"response\": { \"elapsed_time\":%{ms}T, \"status\":\"%>s\" } }" json

    # \"bytes_in\": %{}I, \"bytes_out\": %{}O, \"referrer\":\"%{Referer}i\"

    # Sender logger til STDOUT/STDERR i Docker
    ErrorLog /proc/self/fd/2
    CustomLog /proc/self/fd/1 json

    <Directory /var/www/html >
        # Enable .httaccess
        AllowOverride All

        # Gjør det mulig å nå php-filer uten å angi .php-endelsen
        RewriteEngine on
        RewriteCond %{REQUEST_FILENAME}.php -f
        RewriteRule (.*) $1.php [L]
    </Directory>

    # For most configuration files from conf-available/, which are
    # enabled or disabled at a global level, it is possible to
    # include a line for only one particular virtual host. For example the
    # following line enables the CGI configuration for this host only
    # after it has been globally disabled with "a2disconf".
    #Include conf-available/serve-cgi-bin.conf
</VirtualHost>
